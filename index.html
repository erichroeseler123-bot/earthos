<!DOCTYPE html>
<html lang="en" class="bg-black">
<head>
    <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EARTHOS | DCC Console</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { theme: { extend: { colors: { 'neon-blue': '#00f2ff' } } } }</script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
        body { font-family: 'Space+Mono', monospace; margin:0; background:#000; color:#fff; }
        .dcc-map-container { position: relative; width: 100%; background: #000; border: 1px solid #27272a; border-radius: 2px; overflow: hidden; margin-top: 10px; }
        #tactical-feed { width: 100%; height: 200px; filter: brightness(0.8) contrast(1.2); }
        #birds-eye-feed { width: 100%; height: 160px; filter: grayscale(0.2) brightness(0.7); }
        .scan-line { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: rgba(0, 242, 255, 0.4); box-shadow: 0 0 10px rgba(0, 242, 255, 0.8); z-index: 10; pointer-events: none; animation: dccScan 5s linear infinite; }
        @keyframes dccScan { 0% { top: 0%; opacity: 0; } 5% { opacity: 1; } 95% { opacity: 1; } 100% { top: 100%; opacity: 0; } }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row overflow-x-hidden">
    <aside class="fixed inset-y-0 left-0 z-50 w-64 bg-black border-r border-zinc-800 p-6 flex flex-col gap-6 md:relative md:translate-x-0">
        <div>
            <p class="text-[10px] font-black tracking-[0.4em] uppercase text-zinc-500 italic mb-1">Intelligence Layer</p>
            <h1 class="text-2xl font-black italic text-white uppercase">EARTHOS <span class="text-neon-blue not-italic">DCC</span></h1>
        </div>
        <div id="ai-briefing" class="bg-zinc-900/50 border border-zinc-800 p-4 text-[9px] uppercase">
            <p class="text-neon-blue mb-2 font-black tracking-widest">// SITREP_INTEL_ACTIVE</p>
            <div id="intel-text" class="text-zinc-400 italic leading-relaxed">Analyzing current geo-nodes...</div>
        </div>
        <div class="border-y border-zinc-800 py-4 space-y-2 text-[9px] uppercase font-bold text-zinc-500">
            <p class="text-neon-blue">// SITE_LAT: 39.6654° N</p><p class="text-neon-blue">// SITE_LON: 105.2054° W</p>
            <div class="dcc-map-container"><div id="tactical-feed"></div><div class="scan-line"></div></div>
            <p id="heading-display" class="text-[8px] text-zinc-600 font-mono uppercase mt-1">HEADING: 320° // SAT_ACTIVE</p>
            <div class="dcc-map-container"><div id="birds-eye-feed"></div></div>
        </div>
<nav class="flex flex-col gap-3 font-bold uppercase italic text-[10px]">
    <a href="/" class="w-full py-3 px-4 bg-zinc-900/50 border border-zinc-800 text-white text-left">Home // Console →</a>
    <a href="/schedule" class="w-full py-3 px-4 border border-zinc-800 text-zinc-400 hover:text-white text-left">Concert Schedule</a>
    <a href="/faq" class="w-full py-3 px-4 border border-zinc-800 text-zinc-400 hover:text-white text-left">F.A.Q. // INTEL</a>
    <a href="/book?type=shuttle" class="w-full py-3 px-4 bg-neon-blue text-white text-left font-black tracking-widest">$59 SHUTTLE EXEC</a>
</nav>
    </aside>
    <main class="flex-1 h-screen relative overflow-y-auto border-t md:border-t-0 md:border-l border-zinc-800 bg-black">
        <div class="p-10 max-w-7xl mx-auto w-full">
            <div class="text-neon-blue animate-pulse uppercase text-xs mb-8">Resolving_Visual_Nodes...</div>
            <div id="events" class="grid grid-cols-1 gap-6"></div>
        </div>
    </main>
    <script>
        const GOOGLE_API_KEY = "AlzaSyAvqPbald4nw..."; // Pull full key from Dashboard
        const GOOGLE_MAP_ID  = "5c1b9f3082e0cc4ec..."; // Pull full ID from Dashboard
        (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Re-imports might be a no-op."):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({key: GOOGLE_API_KEY, v: "beta"});
        let heading = 320;
        async function initDCC() {
            const { Map } = await google.maps.importLibrary("maps");
            const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary("marker");
            const pos = { lat: 39.6654, lng: -105.2057 };
            const tacticalMap = new Map(document.getElementById("tactical-feed"), { center: pos, zoom: 17.2, tilt: 50, heading: heading, mapId: GOOGLE_MAP_ID, mapTypeId: 'satellite', disableDefaultUI: true });
            const birdsEyeMap = new Map(document.getElementById("birds-eye-feed"), { center: pos, zoom: 13, mapId: GOOGLE_MAP_ID, disableDefaultUI: true, gestureHandling: "none" });
            const pin = new PinElement({ background: "#00f2ff", borderColor: "#fff", scale: 0.7 });
            new AdvancedMarkerElement({ map: birdsEyeMap, position: pos, title: "RED ROCKS", content: pin.element });
            setInterval(() => { heading += 0.05; tacticalMap.setHeading(heading); const display = document.getElementById("heading-display"); if (display) display.innerText = `HEADING: ${Math.floor(heading)}° // SAT_ACTIVE`; }, 50);
            fetch("/api/intel-briefing").then(r => r.json()).then(data => { document.getElementById("intel-text").innerText = data.briefing; }).catch(() => { document.getElementById("intel-text").innerText = "SITREP_PENDING: ANALYZING_GEO_NODES"; });
        }
        initDCC();
    </script>
</body>
</html>
